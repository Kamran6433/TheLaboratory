import{_ as z}from"./BRHFbSSw.js";import{S as W,a7 as L,a8 as G,a9 as H,_ as O,e as Q,G as B,aa as J,R as K,r as _,f as X,c as m,a as v,b as o,w as a,B as E,I as R,F as S,o as l,A as $,d as i,t as h,j as Y,k as T,h as g,ab as Z,ac as A,ad as ee,l as q,m as te,ae,p as se,q as oe,v as re,x as ne,y as le}from"./j--dK8i6.js";import"./BN-SObt9.js";function ie(){const{$firebaseStorage:x}=W();return{listPapers:async d=>{const c=L(x,d);try{return(await G(c)).items.map(p=>p.name)}catch(u){return console.error("Error listing papers:",u),[]}},getPDFUrl:async d=>{const c=L(x,d);try{return await H(c)}catch(u){throw console.error("Error getting download URL:",u.code,u.message),u}}}}const ue={class:"past-paper-background"},de={class:"text-center mb-8"},ce={class:"blur-effect pa-6 rounded-xl text-white mx-auto"},pe={class:"text-4xl md:text-5xl font-bold mb-6"},fe={key:0,class:"d-flex justify-center align-center py-12"},me={key:1,class:"text-center py-12"},ve={class:"d-flex gap-2"},ge={key:0},_e={class:"content-wrapper"},be={__name:"[id]",setup(x){const I=Q(),N=B(()=>!!I.getUser),d=J();K();const{listPapers:c,getPDFUrl:u}=ie(),p=_("foundation"),w=_([]),P=_([]),k=_(!0),b=_(null),M=B(()=>{const s=d.params.id.split("-");if(s.length<2)return"Unknown Subject";const[e,r]=s;return`${e.charAt(0).toUpperCase()+e.slice(1)} (${r.toUpperCase()})`}),j=s=>{const e={};return s.forEach(r=>{const t=r.split(" ")[1],n=r.includes("MS")?"ms":"qp";e[t]||(e[t]={date:t}),e[t][n]=r}),Object.values(e)},D=async(s,e)=>{if(s)try{const r=d.params.id.split("-"),[t,n,f,y,V,C]=r,U=`${t}/${n}/${f}/${y}/${V}${C}/${e}/${s}`,F=await u(U);window.open(F,"_blank")}catch(r){console.error("Error loading PDF: ",r),alert("Failed to load the PDF. Please try again.")}};return X(async()=>{k.value=!0,b.value=null;try{const s=d.params.id.split("-");if(s.length<6)throw new Error("Invalid paper ID");const[e,r,t,n,f,y]=s,V=`${e}/${r}/${t}/${n}/${f}${y}/foundation`,C=await c(V);w.value=j(C);const U=`${e}/${r}/${t}/${n}/${f}${y}/higher`,F=await c(U);P.value=j(F)}catch(s){console.error("Error in onMounted:",s),b.value=s.message}finally{k.value=!1}}),(s,e)=>{const r=z;return l(),m(S,null,[v("section",ue,[o(E,{fluid:"",class:"max-width-1600 py-24 px-4 px-lg-12"},{default:a(()=>[v("div",de,[v("div",ce,[o($,{color:"white",variant:"flat",class:"mb-6","prepend-icon":"mdi-arrow-left",onClick:e[0]||(e[0]=t=>s.$router.push("/past-papers-selector"))},{default:a(()=>e[4]||(e[4]=[i(" Back to Selection ")])),_:1}),v("h1",pe,h(M.value)+" Past Papers ",1)])]),k.value?(l(),m("div",fe,[o(Y,{indeterminate:"",color:"primary",size:"64"})])):b.value?(l(),m("div",me,[o(T,{type:"error",class:"mb-6"},{default:a(()=>[i(h(b.value),1)]),_:1}),o($,{color:"primary",onClick:e[1]||(e[1]=t=>s.$router.push("/pastpapersselector"))},{default:a(()=>e[5]||(e[5]=[i(" Return to paper selection ")])),_:1})])):(l(),g(te,{key:2,class:"papers-card rounded-xl overflow-hidden"},{default:a(()=>[o(Z,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),color:"primary",grow:"",class:"papers-tabs"},{default:a(()=>[o(A,{value:"foundation",class:"text-lg font-semibold"},{default:a(()=>e[6]||(e[6]=[i(" Foundation ")])),_:1}),o(A,{value:"higher",class:"text-lg font-semibold"},{default:a(()=>e[7]||(e[7]=[i(" Higher ")])),_:1})]),_:1},8,["modelValue"]),o(ee,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t)},{default:a(()=>[(l(),m(S,null,q(["foundation","higher"],t=>o(ae,{key:t,value:t},{default:a(()=>[o(se,{class:"pa-6"},{default:a(()=>[(t==="foundation"?w.value.length:P.value.length)?(l(),g(oe,{key:0,class:"papers-list"},{default:a(()=>[(l(!0),m(S,null,q(t==="foundation"?w.value:P.value,n=>(l(),g(re,{key:n.date,class:"paper-item mb-4 rounded-lg"},{prepend:a(()=>[o(ne,{size:"large",color:"primary",class:"mr-4"},{default:a(()=>e[8]||(e[8]=[i(" mdi-file-document-outline ")])),_:1})]),append:a(()=>[v("div",ve,[n.qp?(l(),g($,{key:0,color:"primary",variant:"outlined",onClick:f=>D(n.qp,t)},{default:a(()=>e[9]||(e[9]=[i(" Question Paper ")])),_:2},1032,["onClick"])):R("",!0),n.ms?(l(),g($,{key:1,color:"success",variant:"outlined",onClick:f=>D(n.ms,t)},{default:a(()=>e[10]||(e[10]=[i(" Mark Scheme ")])),_:2},1032,["onClick"])):R("",!0)])]),default:a(()=>[o(le,{class:"text-h6 font-weight-bold mb-2"},{default:a(()=>[i(h(n.date),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):(l(),g(T,{key:1,type:"info",class:"mt-4"},{default:a(()=>[i(" No "+h(t)+" papers available. ",1)]),_:2},1024))]),_:2},1024)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}))]),_:1})]),N.value?R("",!0):(l(),m("section",ge,[o(E,{class:"pa-0",fluid:"","data-aos":"fade-up","data-aos-duration":"300"},{default:a(()=>[v("div",_e,[o(r,{"start-color":"#0f172a","end-color":"#f6f6ff"})])]),_:1})]))],64)}}},xe=O(be,[["__scopeId","data-v-22d4286c"]]);export{xe as default};
//# sourceMappingURL=CspsJlYO.js.map
